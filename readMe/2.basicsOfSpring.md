# Spring Basics
## üå± 1. What Is the Spring Framework?
- Spring is a lightweight Java framework that helps you build loosely coupled, testable, and maintainable applications.
- At its core, it provides:
  - Dependency Injection (DI) / Inversion of Control (IoC)
  - A container to manage objects (called Beans)
  - Support for layers like Web (MVC), Data (JPA), AOP, Security, etc.
## ‚öôÔ∏è 2. The Core Idea ‚Äî Inversion of Control (IoC)
- Normally, in Java, you create objects yourself using new.
```
UserService service = new UserService();
```
- In Spring, you let Spring create and manage those objects for you ‚Äî this is Inversion of Control.
- Spring maintains a container (called the ApplicationContext) that:
- Creates objects (beans)
- Injects dependencies
- Manages their lifecycle
##  üíâ 3. Dependency Injection (DI)
- Spring will ‚Äúinject‚Äù dependencies into classes automatically.
- Example (Plain Java)
```
public class UserService {
  private final UserRepository repository;

      public UserService(UserRepository repository) {
          this.repository = repository;
      }
  }
```  
- In Spring
```
@Component
  public class UserRepository {
    // handles data access
  }
```
```
@Service
public class UserService {

    private final UserRepository repository;

    @Autowired   // Spring will inject this automatically
    public UserService(UserRepository repository) {
        this.repository = repository;
    }
}
```
## What Happens Internally
- When your app starts, Spring scans your package.
- It finds all classes annotated with @Component, @Service, @Repository, @Controller, etc.
- It creates them as beans and stores them in the ApplicationContext.
- When another bean depends on one, it injects it automatically.
## üß± 4. Spring Configuration
- Before Spring Boot, you had to configure things manually.
- Old XML style
```<bean id="userService" class="com.example.UserService"/>```
- Modern Java-based configuration
```
@Configuration
public class AppConfig {

    @Bean
    public UserService userService() {
        return new UserService(new UserRepository());
    }
}
```
- Spring Boot automates all of this ‚Äî you almost never write it manually anymore.
## üß© 5. The ApplicationContext (IoC Container)
- ApplicationContext is the central interface to access beans.
- Example:
```
ApplicationContext context =
new AnnotationConfigApplicationContext(AppConfig.class);

UserService service = context.getBean(UserService.class);
service.doSomething();
```
- In Spring Boot, this happens automatically when you run your app ‚Äî Boot creates the context and wires everything for you.
## üöÄ 6. How Spring Boot Uses Spring Internally
- Let‚Äôs connect the dots üëá

| **Concept**              | **In Spring**                                    | **In Spring Boot**                                            |
|--------------------------|--------------------------------------------------|---------------------------------------------------------------|
| **IoC Container**        | You create it manually with `ApplicationContext` | Boot creates it automatically                                 |
| **Component Scanning**   | You specify packages                             | Boot scans the package of your `@SpringBootApplication` class |
| **Bean Configuration**   | You define beans with `@Configuration`           | Boot auto-configures beans via **starters**                   |
| **Dependency Injection** | `@Autowired` or constructor injection            | Same ‚Äî Boot uses this too                                     |
| **Running the App**      | You create `ApplicationContext` manually         | Boot runs it via `SpringApplication.run()`                    |

- Example ‚Äî Minimal Spring Boot App
```
@SpringBootApplication
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
```
## When you run this:
- Boot creates an ApplicationContext.
- Scans for beans in the current package.
- Auto-configures necessary infrastructure (e.g. Tomcat server, DataSource, etc.).
- Starts the app.
- That‚Äôs it ‚Äî all the manual Spring setup happens behind the scenes.
## üîÑ 7. Common Stereotype Annotations
- **Annotation	Purpose**
- **@Component:**	Generic Spring bean
- **@Service:**	Marks a business/service class.
- **@Repository:**	Marks a DAO/repository (data layer).
- **@Controller / @RestController:**	Marks web layer/controller.
- **@Configuration:** Defines bean factory methods.
- **@Bean:** Declares a bean manually inside a config class
- **@Autowired:** Tells Spring to inject a dependency.
## üß† 8. Example: Putting It All Together
```
// Data layer
@Repository
public class UserRepository {
    public String findUser() {
        return "Alice";
    }
}

// Service layer
@Service
public class UserService {
private final UserRepository repo;

    public UserService(UserRepository repo) {
        this.repo = repo;
    }

    public String getUser() {
        return repo.findUser();
    }
}

// Web layer
@RestController
public class UserController {
private final UserService service;

    public UserController(UserService service) {
        this.service = service;
    }

    @GetMapping("/user")
    public String getUser() {
        return service.getUser();
    }
}

// Main class
@SpringBootApplication
public class DemoApplication {
    public static void main(String[] args) {
        SpringApplication.run(DemoApplication.class, args);
    }
}
```
## ‚úÖ When you run this Spring Boot app:
- Boot scans and creates all beans (UserRepository, UserService, UserController)
- Injects dependencies automatically
- Starts an embedded Tomcat server
- Exposes an endpoint: GET /user ‚Üí returns "Alice"
## ‚ö° 9. Behind the Scenes (Auto-Configuration)
- Spring Boot uses AutoConfiguration to set up common beans.
- Example:
- If you include spring-boot-starter-web, Boot:
- Adds Tomcat automatically
- Configures a DispatcherServlet
- Scans for @RestController beans
- You don‚Äôt need to configure any of that manually.
## üß© 10. Summary ‚Äî How Spring Works in Boot
- Step	What Happens
- 1Ô∏è‚É£	Boot launches SpringApplication.run()
- 2Ô∏è‚É£	Creates the ApplicationContext (IoC container)
- 3Ô∏è‚É£	Performs component scanning
- 4Ô∏è‚É£	Loads auto-configurations based on classpath
- 5Ô∏è‚É£	Registers beans and injects dependencies
- 6Ô∏è‚É£	Starts the embedded web server
- 7Ô∏è‚É£	Your app is ready to handle requests
üìö Quick Practice Plan
‚úÖ Step 1 ‚Äî Create a small Boot app
‚Üí @RestController with /hello endpoint.
‚úÖ Step 2 ‚Äî Add a @Service and @Repository
‚Üí Inject dependencies and return data.
‚úÖ Step 3 ‚Äî Explore beans
‚Üí Use ApplicationContext to list all bean names:
context.getBeanDefinitionNames();
‚úÖ Step 4 ‚Äî Add properties file
‚Üí Use @Value or @ConfigurationProperties.

# üå± Spring Boot Annotations ‚Äî Complete Guide

Spring Boot uses annotations extensively to simplify configuration, dependency injection, data access, web development, and more.  
This document covers **all important annotations**, their **definitions**, **usage**, and **examples**, grouped by category.


## üß© 1. Core Spring & Boot Annotations

| Annotation               | Description                                                                                                     | Example                                                                                                                                                   |
|--------------------------|-----------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| `@SpringBootApplication` | Combines `@Configuration`, `@EnableAutoConfiguration`, and `@ComponentScan`. Entry point for a Spring Boot app. | ```java\n@SpringBootApplication\npublic class App {\n  public static void main(String[] args) {\n    SpringApplication.run(App.class, args);\n  }\n}\n``` |
| `@ComponentScan`         | Tells Spring where to search for annotated components.                                                          | `@ComponentScan("com.example.services")`                                                                                                                  |
| `@Configuration`         | Marks a class as a source of bean definitions.                                                                  | ```java\n@Configuration\npublic class AppConfig {\n  @Bean\n  public UserService userService() {\n    return new UserService();\n  }\n}\n```              |
| `@Bean`                  | Declares a Spring-managed bean from a method.                                                                   | `@Bean public DataSource dataSource() { ... }`                                                                                                            |
| `@Component`             | Generic stereotype for any Spring-managed component.                                                            | `@Component public class EmailService { ... }`                                                                                                            |
| `@Lazy`                  | Creates bean only when needed (lazy initialization).                                                            | `@Lazy @Component public class HeavyService { ... }`                                                                                                      |
| `@Primary`               | Marks a bean as the default when multiple candidates exist.                                                     | `@Primary @Bean public DataSource mainDataSource() { ... }`                                                                                               |
| `@DependsOn`             | Forces a bean to initialize only after certain other beans.                                                     | `@DependsOn("dataSource")`                                                                                                                                |

---

## üß† 2. Dependency Injection Annotations

| Annotation   | Description                                                             | Example                                                                      |
|--------------|-------------------------------------------------------------------------|------------------------------------------------------------------------------|
| `@Autowired` | Injects a bean automatically by type.                                   | `@Autowired private UserRepository repo;`                                    |
| `@Qualifier` | Used with `@Autowired` to disambiguate multiple beans of the same type. | `@Autowired @Qualifier("emailService") private NotificationService service;` |
| `@Value`     | Injects a value from properties file or environment.                    | `@Value("${server.port}") private int port;`                                 |
| `@Scope`     | Defines bean scope (`singleton`, `prototype`, `request`, `session`).    | `@Scope("prototype") @Component public class ReportGenerator {}`             |
| `@Lookup`    | Returns a bean dynamically from the Spring context.                     | `@Lookup("prototypeBean") public Bean getBean() {}`                          |

---

## üåê 3. Web & REST Controller Annotations

| Annotation                                                                      | Description                                                                | Example                                                                    |
|---------------------------------------------------------------------------------|----------------------------------------------------------------------------|----------------------------------------------------------------------------|
| `@RestController`                                                               | Combines `@Controller` and `@ResponseBody`. Returns data instead of views. | `@RestController public class UserController {}`                           |
| `@Controller`                                                                   | Marks a web MVC controller ‚Äî typically returns a view.                     | `@Controller public class HomeController {}`                               |
| `@RequestMapping`                                                               | Maps HTTP requests to controllers or methods.                              | `@RequestMapping("/users")`                                                |
| `@GetMapping`, `@PostMapping`, `@PutMapping`, `@DeleteMapping`, `@PatchMapping` | Specialized mappings for respective HTTP methods.                          | `@GetMapping("/users/{id}") public User getUser(@PathVariable Long id)`    |
| `@PathVariable`                                                                 | Binds URI path variable to method parameter.                               | `@GetMapping("/user/{id}") public User get(@PathVariable Long id)`         |
| `@RequestParam`                                                                 | Extracts query parameters from URL.                                        | `@GetMapping("/search") public List<User> find(@RequestParam String name)` |
| `@RequestBody`                                                                  | Maps request body to a Java object.                                        | `@PostMapping("/users") public void addUser(@RequestBody User user)`       |
| `@ResponseBody`                                                                 | Converts return value to JSON/XML directly.                                | `@ResponseBody public User getUser() { ... }`                              |
| `@ResponseStatus`                                                               | Defines HTTP status for a method or exception.                             | `@ResponseStatus(HttpStatus.CREATED)`                                      |
| `@CrossOrigin`                                                                  | Enables CORS.                                                              | `@CrossOrigin(origins = "http://localhost:3000")`                          |
| `@ExceptionHandler`                                                             | Handles exceptions locally in controller.                                  | `@ExceptionHandler(Exception.class)`                                       |
| `@ControllerAdvice`                                                             | Global exception or model handler.                                         | `@ControllerAdvice public class GlobalExceptionHandler {}`                 |
| `@ModelAttribute`                                                               | Binds model attributes to parameters or methods.                           | `@ModelAttribute("user") User user`                                        |
| `@SessionAttributes`                                                            | Stores model attributes in session.                                        | `@SessionAttributes("cart")`                                               |

---

## üß± 4. Spring Data JPA Annotations

| Annotation                                             | Description                                | Example                                                   |
|--------------------------------------------------------|--------------------------------------------|-----------------------------------------------------------|
| `@Entity`                                              | Marks a class as a JPA entity.             | `@Entity public class User { @Id Long id; }`              |
| `@Table`                                               | Specifies table name and properties.       | `@Table(name = "users")`                                  |
| `@Id`                                                  | Marks primary key field.                   | `@Id private Long id;`                                    |
| `@GeneratedValue`                                      | Specifies primary key generation strategy. | `@GeneratedValue(strategy = GenerationType.IDENTITY)`     |
| `@Column`                                              | Configures column mapping.                 | `@Column(name = "email", nullable = false)`               |
| `@Transient`                                           | Field not persisted in DB.                 | `@Transient private int tempValue;`                       |
| `@OneToOne`, `@OneToMany`, `@ManyToOne`, `@ManyToMany` | Define entity relationships.               | `@OneToMany(mappedBy="user") private List<Order> orders;` |
| `@JoinColumn`                                          | Defines join column for relationships.     | `@JoinColumn(name="user_id")`                             |
| `@Enumerated`                                          | Maps enum to DB column.                    | `@Enumerated(EnumType.STRING)`                            |
| `@Lob`                                                 | Large object (BLOB/CLOB).                  | `@Lob private byte[] data;`                               |
| `@Query`                                               | Custom JPQL query in repository.           | `@Query("SELECT u FROM User u WHERE u.name = :name")`     |
| `@Modifying`                                           | Marks query as update/delete.              | `@Modifying @Query("DELETE FROM User u WHERE u.id=:id")`  |
| `@Transactional`                                       | Marks method/class as transactional.       | `@Transactional public void saveData()`                   |
| `@EnableJpaRepositories`                               | Enables scanning for JPA repositories.     | `@EnableJpaRepositories("com.example.repo")`              |

---

## ‚öôÔ∏è 5. Spring Boot Configuration & Properties

| Annotation                       | Description                                         | Example                                                                                                       |
|----------------------------------|-----------------------------------------------------|---------------------------------------------------------------------------------------------------------------|
| `@EnableAutoConfiguration`       | Enables Spring Boot‚Äôs auto-configuration mechanism. | Included in `@SpringBootApplication`                                                                          |
| `@ConfigurationProperties`       | Binds external properties to a POJO.                | ```java\n@ConfigurationProperties(prefix="app")\npublic class AppProperties {\n  private String name;\n}\n``` |
| `@PropertySource`                | Loads external property files.                      | `@PropertySource("classpath:custom.properties")`                                                              |
| `@Import`                        | Imports additional configuration classes.           | `@Import(AppConfig.class)`                                                                                    |
| `@Profile`                       | Enables beans only for specific profiles.           | `@Profile("dev") @Component`                                                                                  |
| `@EnableConfigurationProperties` | Enables `@ConfigurationProperties` beans.           | `@EnableConfigurationProperties(AppProperties.class)`                                                         |

---

## üßµ 6. AOP (Aspect-Oriented Programming) Annotations

| Annotation                | Description                                              | Example                                               |
|---------------------------|----------------------------------------------------------|-------------------------------------------------------|
| `@Aspect`                 | Marks a class as an aspect (for cross-cutting concerns). | `@Aspect @Component public class LoggingAspect {}`    |
| `@Before`                 | Runs advice before a method.                             | `@Before("execution(* com.app.service.*.*(..))")`     |
| `@After`                  | Runs advice after a method completes.                    | `@After("execution(* com.app.service.*.*(..))")`      |
| `@AfterReturning`         | Runs only if method returns successfully.                | `@AfterReturning(pointcut="...", returning="result")` |
| `@AfterThrowing`          | Runs when a method throws exception.                     | `@AfterThrowing(pointcut="...", throwing="ex")`       |
| `@Around`                 | Wraps a method ‚Äî used for logging, performance, etc.     | `@Around("execution(* com.app.service.*.*(..))")`     |
| `@EnableAspectJAutoProxy` | Enables aspect processing.                               | `@EnableAspectJAutoProxy`                             |

---

## üîí 7. Spring Security Annotations

| Annotation           | Description                              | Example                                                       |
|----------------------|------------------------------------------|---------------------------------------------------------------|
| `@EnableWebSecurity` | Enables Spring Security configuration.   | `@EnableWebSecurity public class SecurityConfig {}`           |
| `@PreAuthorize`      | Pre-invocation authorization check.      | `@PreAuthorize("hasRole('ADMIN')")`                           |
| `@PostAuthorize`     | Post-invocation authorization check.     | `@PostAuthorize("returnObject.owner == authentication.name")` |
| `@Secured`           | Restricts access by roles.               | `@Secured("ROLE_ADMIN")`                                      |
| `@RolesAllowed`      | Similar to `@Secured`, standard JSR-250. | `@RolesAllowed("ROLE_USER")`                                  |

---

## ‚è±Ô∏è 8. Scheduling & Async Annotations

| Annotation          | Description                 | Example                          |
|---------------------|-----------------------------|----------------------------------|
| `@EnableScheduling` | Enables scheduling tasks.   | `@EnableScheduling`              |
| `@Scheduled`        | Runs method periodically.   | `@Scheduled(fixedRate = 5000)`   |
| `@Async`            | Runs method asynchronously. | `@Async public void sendEmail()` |
| `@EnableAsync`      | Enables async processing.   | `@EnableAsync`                   |

---

## üß™ 9. Testing Annotations

| Annotation                           | Description                                      | Example                                      |
|--------------------------------------|--------------------------------------------------|----------------------------------------------|
| `@SpringBootTest`                    | Boots full Spring context for integration tests. | `@SpringBootTest class AppTests {}`          |
| `@WebMvcTest`                        | Loads only web layer beans.                      | `@WebMvcTest(UserController.class)`          |
| `@DataJpaTest`                       | Loads JPA components for repository testing.     | `@DataJpaTest`                               |
| `@MockBean`                          | Mocks a Spring bean.                             | `@MockBean private UserService userService;` |
| `@ExtendWith(SpringExtension.class)` | Integrates JUnit 5 with Spring.                  | `@ExtendWith(SpringExtension.class)`         |

---

## ‚ö° 10. Miscellaneous Annotations

| Annotation                               | Description                                         | Example                                                              |
|------------------------------------------|-----------------------------------------------------|----------------------------------------------------------------------|
| `@Order`                                 | Specifies execution order (e.g., filters, aspects). | `@Order(1)`                                                          |
| `@EventListener`                         | Listens to Spring events.                           | `@EventListener(ApplicationReadyEvent.class)`                        |
| `@Conditional`                           | Creates bean conditionally.                         | `@ConditionalOnProperty(name="feature.enabled", havingValue="true")` |
| `@EnableCaching`                         | Enables caching mechanism.                          | `@EnableCaching`                                                     |
| `@Cacheable`, `@CacheEvict`, `@CachePut` | Caching annotations.                                | `@Cacheable("users") public User getUser(Long id)`                   |

---

## üß† Summary

| Category           | Key Annotations                                     | Purpose                            |
|--------------------|-----------------------------------------------------|------------------------------------|
| **Core**           | `@SpringBootApplication`, `@Configuration`, `@Bean` | Bootstrapping and bean definitions |
| **DI**             | `@Autowired`, `@Component`, `@Qualifier`            | Dependency injection               |
| **Web**            | `@RestController`, `@GetMapping`                    | REST endpoints                     |
| **Data**           | `@Entity`, `@Transactional`, `@Query`               | Data access                        |
| **Async/Schedule** | `@EnableScheduling`, `@Async`                       | Background tasks                   |
| **Caching**        | `@EnableCaching`, `@Cacheable`                      | Performance optimization           |
| **Security**       | `@EnableWebSecurity`, `@PreAuthorize`               | Access control                     |
| **Testing**        | `@SpringBootTest`, `@MockBean`                      | Test configuration                 |

---

## üí° Pro Tips

- Use `@SpringBootApplication` on your main class ‚Äî it automatically enables component scanning and auto-configuration.
- `@RestController` is ideal for REST APIs ‚Äî it‚Äôs a shortcut for `@Controller + @ResponseBody`.
- Combine `@ConfigurationProperties` with YAML for clean config management.
- Use `@Async` and `@EnableScheduling` for background or scheduled jobs.
- Always mark repository operations with `@Transactional` to ensure consistency.

---

**‚≠ê Keep Learning:** Explore related annotations in Spring Cloud (`@EnableEurekaClient`, `@FeignClient`, etc.) and Spring Batch (`@EnableBatchProcessing`).

